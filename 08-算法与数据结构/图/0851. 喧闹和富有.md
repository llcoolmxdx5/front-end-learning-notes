# [851. 喧闹和富有](https://leetcode-cn.com/problems/loud-and-rich/)

## 题目

有一组 `n` 个人作为实验对象，从 0 到 `n - 1` 编号，其中每个人都有不同数目的钱，以及不同程度的安静值（quietness）。为了方便起见，我们将编号为 `x` 的人简称为 `"person x "`。

给你一个数组 `richer` ，其中 `richer[i] = [ai, bi]` 表示 `person ai` 比 `person bi` 更有钱。另给你一个整数数组 `quiet` ，其中 `quiet[i]` 是 `person i` 的安静值。`richer` 中所给出的数据**逻辑自恰**（也就是说，在 `person x` 比 `person y` 更有钱的同时，不会出现 `person y` 比 `person x` 更有钱的情况 ）。

现在，返回一个整数数组 `answer` 作为答案，其中 `answer[x] = y` 的前提是，在所有拥有的钱肯定不少于 `person x` 的人中，`person y` 是最安静的人（也就是安静值 `quiet[y]` 最小的人）。

示例 1：

```txt
输入：richer = [[1,0],[2,1],[3,1],[3,7],[4,3],[5,3],[6,3]], quiet = [3,2,5,4,6,1,7,0]
输出：[5,5,2,5,4,5,6,7]
解释：
answer[0] = 5，
person 5 比 person 3 有更多的钱，person 3 比 person 1 有更多的钱，person 1 比 person 0 有更多的钱。
唯一较为安静（有较低的安静值 quiet[x]）的人是 person 7，
但是目前还不清楚他是否比 person 0 更有钱。
answer[7] = 7，
在所有拥有的钱肯定不少于 person 7 的人中（这可能包括 person 3，4，5，6 以及 7），
最安静（有较低安静值 quiet[x]）的人是 person 7。
其他的答案也可以用类似的推理来解释。
```

示例 2：

```txt
输入：richer = [], quiet = [0]
输出：[0]
```

提示：

- `n == quiet.length`
- `1 <= n <= 500`
- `0 <= quiet[i] < n`
- `quiet` 的所有值**互不相同**
- `0 <= richer.length <= n * (n - 1) / 2`
- `0 <= ai`, `bi < n`
- `ai != bi`
- `richer` 中的所有数对**互不相同**
- 对 `richer` 的观察在逻辑上是一致的

## 难度

中等

## 标签

深度优先搜索 图 拓扑排序 数组

## 解题思路

![851-ans](./imgs/851-ans.png)

对于给定的示例，画个图类似上面这样，圆圈里面的数字是人物编号，旁边的数字是他的安静值。

所以，你可以看到对于 2、5、4、6 节点来说，他们在 `answer` 中的结果就是他们自己，因为，没有人比他们更有钱了，只能选他们自己。

而对于 3 来说，比他更有钱的有 5、4、6、3（需要包含他自己），在这几个节点中找安静值最小的，也就是 5 号，所以，`answer[3] = 5`。

然后，对于 1 来说，比他更有钱的有 2、3、1、5、4、6，但是，5、4、6 对于结果的贡献值已经传递给 3 了，所以，对于 `answer[3]` 我们在计算 1 的时候是可以直接利用的，也就是说计算 1 的时候并不需要看 5、4、6 的值了。

同理，可以得到其他所有节点的 `answer` 值。

### 方法一：深度优先搜索

复杂度分析

- 时间复杂度：`O(n+m)`，其中 `n` 是数组 `quiet` 的长度，`m` 是数组 `richer` 的长度。建图和 DFS 的时间复杂度均为 `O(n+m)`。
- 空间复杂度：`O(n+m)`。我们需要 `O(n+m)` 的空间来记录图中所有的点和边。

### 方法二：拓扑排序

复杂度分析

- 时间复杂度：`O(n+m)`，其中 `n` 是数组 `quiet` 的长度，`m` 是数组 `richer` 的长度。建图和拓扑排序的时间复杂度均为 `O(n+m)`。
- 空间复杂度：`O(n+m)`。我们需要 `O(n+m)` 的空间来记录图中所有的点和边。

## 提交速度

- 执行用时：`104 ms`, 在所有 JavaScript 提交中击败了 `68.42%` 的用户
- 内存消耗：`46.2 MB`, 在所有 JavaScript 提交中击败了 `89.47%` 的用户
