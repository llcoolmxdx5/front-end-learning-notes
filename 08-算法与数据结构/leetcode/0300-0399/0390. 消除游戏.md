# [390. 消除游戏](https://leetcode-cn.com/problems/elimination-game/)

## 题目

列表 `arr` 由在范围 `[1, n]` 中的所有整数组成，并按严格递增排序。请你对 `arr` 应用下述算法：

- 从左到右，删除第一个数字，然后每隔一个数字删除一个，直到到达列表末尾。
- 重复上面的步骤，但这次是从右到左。也就是，删除最右侧的数字，然后剩下的数字每隔一个删除一个。
- 不断重复这两步，从左到右和从右到左交替进行，直到只剩下一个数字。

给你整数 `n` ，返回 `arr` 最后剩下的数字。

示例 1：

```txt
输入：n = 9
输出：6
解释：
arr = [1, 2, 3, 4, 5, 6, 7, 8, 9]
arr = [2, 4, 6, 8]
arr = [2, 6]
arr = [6]
```

示例 2：

```txt
输入：n = 1
输出：1
```

提示：

- `1 <= n <= 10^9`

## 难度

中等

## 标签

数学

## 解题思路

每个回合更新和记录 `head` 变量，当数组的总数变为 1 时，`head` 就是最后的一个数

什么时候更新这个 `head` 变量呢？

- 当我们从左边开始移除的时
- 当我们从右边开始移除并且剩余的数的总数 `number % 2 == 1` 时

   比如 2 4 6 8 10，我们从 10 开始移除，我们将会移除 10，6，2，head 被移除并且变为 4
   比如 2 4 6 8 10 12，我们从 12 开始移除，我们将会移除 12，8，4，head 仍然是 2

然后我们发现了一个更新 `head` 的规则

例如：1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24

1. 初始化变量 `head = 1`，`left = true`，`step = 1`，`n = 24`
   - `left` 用来判断是从左边开始移除还是从右边开始移除（`true` 表示从左边开始）
   - `step` 用来表示 `head` 移动步长
   - `n` 在题目中给出，我们用来记录数组数字的总数
2. 我们第一次从左边开始移除，我们肯定需要把 `head` 移到下一个位置（`head = head + step`）
   - 所以我们第一次循环将得到 2 4 6 8 10 12 14 16 18 20 22 24
   - `head = 2`, `left = false`, `step = 1 * 2 = 2`, `n = n / 2 = 12`
3. 第二次循环，我们从右边开始移除，在什么情况下我们需要移动头部？
   - 只有 `n % 2 == 1`，在这种情况下我们有 `12 % 2 == 0`，我们不修改 `head`
   - 所以第二次循环之后我们将得到： 2 6 10 14 18 22
   - `head = 2`, `left = true`, `step = 2 * 2 = 4`, `n = n / 2 = 6`
4. 第三次循环，我们从左边开始移除，第三次循环我们将把 `head` 移动到下一个位置
   - 第三次循环之后我们将得到： 6 14 22
   - `head = 6`, `left = false`, `step = 4 * 2 = 8`, `n = n / 2 = 3`
5. 第四次循环，我们从右边开始移除，注意 `head`：
   - 我们得到 `n(3) % 2 == 1`，所以我们知道需要将 head 移动到下一个位置
   - 这次循环之后，我们将得到： 14
   - `head = 14`, `left = true`, `step = 8 * 2 = 16`, `n = n / 2 = 1`
6. `n` 等于 1， 循环结束，`return head`

复杂度分析

- 时间复杂度：`O(logn)`，其中 `n` 为初始整数列表的元素数目。每次删除都会将元素数目减半，所以时间复杂度为 `O(logn)`。
- 空间复杂度：`O(1)`。只需要使用常数的额外空间。

## 提交速度

- 执行用时：`116 ms`, 在所有 JavaScript 提交中击败了`69.23%`的用户
- 内存消耗：`41.9 MB`, 在所有 JavaScript 提交中击败了`82.05%`的用户
