# [397. 整数替换](https://leetcode-cn.com/problems/integer-replacement/)

## 题目

给定一个正整数 `n` ，你可以做如下操作：

1. 如果 `n` 是偶数，则用 `n / 2` 替换 `n` 。
2. 如果 `n` 是奇数，则可以用 `n + 1` 或 `n - 1` 替换 `n` 。

`n` 变为 1 所需的最小替换次数是多少？

示例 1：

```txt
输入：n = 8
输出：3
解释：8 -> 4 -> 2 -> 1
```

示例 2：

```txt
输入：n = 7
输出：4
解释：7 -> 8 -> 4 -> 2 -> 1
或 7 -> 6 -> 3 -> 2 -> 1
```

示例 3：

```txt
输入：n = 4
输出：2
```

提示：

- `1 <= n <= 2^31 - 1`

## 难度

中等

## 标签

贪心 位运算 记忆化搜索 动态规划

## 解题思路

技巧: 是奇数时

- `n - 1` 替换 `n` 可以改为 `Math.floor(n / 2)` ,操作数 `+2`
- `n + 1` 替换 `n` 可以改为 `Math.floor(n / 2) + 1` ,操作数 `+2`

### 暴力

复杂度分析

- 时间复杂度 `O(1.618^logn)`
- 空间复杂度 `O(n)`

### 记忆化搜索

我们给方法一的递归加上记忆化，这样递归树的每一层最多只会计算两个 `n` 值，时间复杂度降低为 `O(logn)`

复杂度分析

- 时间复杂度：`O(logn)`。
- 空间复杂度：`O(logn)`，记忆化搜索需要的空间与栈空间相同，同样为 `O(logn)`

### 贪心

为奇数时, 对 4 取余等于 1 则 `-1`, 等于 3 则 `+1`. 注意 `n===3` 时, 返回操作数 `+2`

复杂度分析

- 时间复杂度：`O(logn)`。
- 空间复杂度：`O(1)`。

## 提交速度

- 执行用时：`72 ms`, 在所有 JavaScript 提交中击败了 `61.90%` 的用户
- 内存消耗：`37.6 MB`, 在所有 JavaScript 提交中击败了 `53.57%` 的用户
