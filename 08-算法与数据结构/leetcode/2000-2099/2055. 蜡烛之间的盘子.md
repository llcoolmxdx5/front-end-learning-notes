# [2055. 蜡烛之间的盘子](https://leetcode-cn.com/problems/plates-between-candles/)

## 题目

给你一个长桌子，桌子上盘子和蜡烛排成一列。给你一个下标从 0 开始的字符串 `s` ，它只包含字符 `'*'` 和 `'|'` ，其中 `'*'` 表示一个 盘子 ，`'|'` 表示一支 蜡烛 。

同时给你一个下标从 0 开始的二维整数数组 `queries` ，其中 `queries[i] = [left_i, right_i]` 表示 子字符串 `s[left_i...right_i]` （包含左右端点的字符）。对于每个查询，你需要找到 子字符串中 在 两支蜡烛之间 的盘子的 数目 。如果一个盘子在 子字符串中 左边和右边 都 至少有一支蜡烛，那么这个盘子满足在 两支蜡烛之间 。

比方说，`s = "||**||**|*"` ，查询 `[3, 8]` ，表示的是子字符串 `"*||**|"` 。子字符串中在两支蜡烛之间的盘子数目为 2 ，子字符串中右边两个盘子在它们左边和右边 都 至少有一支蜡烛。
请你返回一个整数数组 `answer` ，其中 `answer[i]` 是第 `i` 个查询的答案。

示例 1:

```txt
输入：s = "**|**|***|", queries = [[2,5],[5,9]]
输出：[2,3]
解释：
- queries[0] 有两个盘子在蜡烛之间。
- queries[1] 有三个盘子在蜡烛之间。
```

示例 2:

```txt
输入：s = "***|**|*****|**||**|*", queries = [[1,17],[4,5],[14,17],[5,11],[15,16]]
输出：[9,0,0,0,0]
解释：
- queries[0] 有 9 个盘子在蜡烛之间。
- 另一个查询没有盘子在蜡烛之间。
```

提示：

- `3 <= s.length <= 10^5`
- `s` 只包含字符 `'*'` 和 `'|'` 。
- `1 <= queries.length <= 10^5`
- `queries[i].length == 2`
- `0 <= left_i <= right_i < s.length`

## 难度

中等

## 标签

数组 字符串 二分查找 前缀和

## 解题思路

### 方法一：预处理 + 前缀和

```txt
prefix 表示位置为 i 处，其符合要求的盘子累计个数
deskL 为位置 i 处，其最领近的左边的桌子的位置
deskR 为位置 i 处，其最领近的右边的桌子的位置

最终答案为 queries 点的右边界的最邻近的左桌子的前缀和减去左边界的最邻近的右桌子的前缀和

如[4,9]。deskR[4]=5,prefix[5]=2; deskL[9]=9,prefix[9]=5
ans=prefix[9]-prefix[5]=3

i       0  1  2  3  4  5  6  7  8  9
s:      *  *  |  *  *  |  *  *  *  |
prefix: 0  0  0  0  0  2  2  2  2  5
deskL : 0  0  0  2  2  5  5  5  5  9（需要从左往右遍历）
deskR : 2  2  2  5  5  5  9  9  9  9（需要从右往左遍历）
```

在实际代码中，可能某个位置的左侧或右侧是不存在蜡烛的，此时我们将对应数组的值记为 −1。

`prefix` 最前面不符合条件的盘子也可以计入，因为最后相减时会消去

## 提交速度

- 执行用时：`296 ms`, 在所有 JavaScript 提交中击败了`80.00%`的用户
- 内存消耗：`74.2 MB`, 在所有 JavaScript 提交中击败了`95.00%`的用户
